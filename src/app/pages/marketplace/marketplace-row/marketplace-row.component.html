<div class="market-place-content">
  <div class="flex-content">
    <ion-button class="sell" size="small" (click)="createListing()">
      Sell
    </ion-button>
    <h6 class="forYou">For You</h6>
    
    <ion-list>
      <ion-item>
        <ion-select placeholder="Categories" (ionChange)="getProducts($event)">
          <ion-select-option *ngFor="let item of categories" [value]="item">
            {{ item.name }}
          </ion-select-option>
          <ion-select-option [value]="{id: null, name: 'All'}">All</ion-select-option>
        </ion-select>
      </ion-item>
    </ion-list>
    
    <ion-spinner *ngIf="loading" name="crescent"></ion-spinner>
  </div>

  <ion-grid class="ion-no-padding">
    <ion-row>
      <ion-col *ngFor="let item of productList" size-md="6" size-xs="6">
        <ion-card (click)="details(item)">
          <div class="cover-photo">
            <div *ngIf="item.is_sold" class="solditem">Sold</div>
            <ion-slides pager="true" [options]="slideOpts" *ngIf="item.media?.length > 1">
              <ion-slide *ngFor="let x of item.media">
                <img [src]="x.original_url" onerror="this.onerror=null;this.src='./../../../assets/Images/dummy-image-square.jpg';" />
              </ion-slide>
            </ion-slides>
            <img *ngIf="item.media?.length <= 1" [src]="item.image_url || (item.media[0]?.original_url)" onerror="this.onerror=null;this.src='./../../../assets/Images/dummy-image-square.jpg';" />
          </div>
          <ion-card-header>
            <ion-card-subtitle>{{ item.title }}</ion-card-subtitle>
            <ion-card-subtitle>{{ item.price | currency }}</ion-card-subtitle>
          </ion-card-header>
        </ion-card>
      </ion-col>
      <div *ngIf="productList?.length === 0 && !loading" style="text-align: center;width: 100%;background: #f2f2f2;margin: 0 15px;">
        <p>No products found</p>
      </div>
    </ion-row>
  </ion-grid>
  <ion-infinite-scroll threshold="100px" (ionInfinite)="onIonInfinite($event)">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data..."></ion-infinite-scroll-content>
  </ion-infinite-scroll>

  <div style="height: 15px;"></div>
</div>
