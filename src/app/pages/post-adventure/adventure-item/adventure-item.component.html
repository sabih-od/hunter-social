<ion-card class="card ion-no-padding ion-no-margin ion-margin-top">
  <ion-card-content class="ion-no-padding ion-no-margin ion-margin-horizontal">
    <ion-item class="ion-no-padding" lines="none">
      <ion-avatar>
        <img class="card-img" [src]="item.user?.profile_image" onerror="this.onerror=null;this.src='../../../assets/Images/dummy-avatar.png';" />
      </ion-avatar>
      <ion-label class="ion-margin-start">
        <h2>{{ item.user?.name }}</h2>
        <p>{{ item.created_at }}</p>
      </ion-label>
      <div class="dot-icon" (click)="show = !show" *ngIf="!item.isMyPost">
        <ion-buttons slot="end">
          <ion-button (click)="openPopup($event)">
            <ion-icon id="click-trigger" name="ellipsis-vertical-outline" style="font-size: 14px"></ion-icon>
          </ion-button>
        </ion-buttons>
      </div>
      <ion-icon *ngIf="item.isMyPost" (click)="showMenu($event)" name="ellipsis-vertical-outline" style="font-size: 14px" slot="end"></ion-icon>
    </ion-item>

    <ion-label class="cardcontent" *ngIf="item.content && item.content !== 'undefined' && item.content !== 'null'">
      {{ item.content }}
    </ion-label>

    <img *ngIf="!item.isVideo && item?.media_upload?.url" [src]="item.media_upload.url" />
    <video *ngIf="item.isVideo" width="100%" height="240" preload="none" controls>
      <source [src]="item.media_upload.url" [type]="item.media_upload.mime_type" />
    </video>

    <ion-row *ngIf="item.count_likes > 0 || item.count_comments > 0" class="actionslist">
      <ion-col size="12">
        <div class="likescounts">
          <p *ngIf="item.count_likes == 1 && item.has_liked">You liked</p>
          <p *ngIf="!item.has_liked && item.count_likes > 1">{{ item.count_likes + ' Likes' }}</p>
          <p *ngIf="item.has_liked && item.count_likes > 1">{{ 'You and ' + (item.count_likes - 1) + ' others liked' }}</p>
          <p *ngIf="item.count_comments" (click)="showComments()">{{ item.count_comments > 1 ? item.count_comments + ' Comments' : item.count_comments + ' Comment' }}</p>
        </div>
      </ion-col>
    </ion-row>

    <ion-row class="actionslist">
      <ion-col size="4">
        <ion-label (click)="like()">
          <i class="iconsax" *ngIf="item.has_liked" icon-name="heart-slash" style="font-size: 22px;"></i>
          <i class="iconsax" *ngIf="!item.has_liked" icon-name="heart" style="font-size: 22px;"></i>
          <ion-text class="action-text">{{ item.has_liked ? 'Liked' : 'Like' }}</ion-text>
        </ion-label>
      </ion-col>

      <ion-col size="5" (click)="showComments()">
        <ion-label>
          <i class="iconsax" icon-name="message-dots" style="font-size: 22px;"></i>
          <ion-text class="action-text">Comments</ion-text>
        </ion-label>
      </ion-col>
      
      <ion-col size="3" (click)="share($event)">
        <ion-label>
          <i class="iconsax" icon-name="share" style="font-size: 22px;"></i>
          <ion-text class="action-text">Share</ion-text>
        </ion-label>
      </ion-col>
    </ion-row>
  </ion-card-content>
</ion-card>
